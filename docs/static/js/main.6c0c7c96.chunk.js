(this["webpackJsonpsimple-flight-check-react"]=this["webpackJsonpsimple-flight-check-react"]||[]).push([[0],{105:function(e,t,a){e.exports={Header:"Header_Header__1iKqF",logout:"Header_logout__IP9U5"}},165:function(e,t,a){e.exports={Button:"Button_Button__1j-zZ"}},19:function(e,t,a){e.exports={FlightCard:"FlightCard_FlightCard__HrJ4o",plane:"FlightCard_plane__1d_JT",plane_wrapper:"FlightCard_plane_wrapper__1xceW",info:"FlightCard_info__1Jf0R",destination:"FlightCard_destination__325vf",destination_arrow:"FlightCard_destination_arrow__2nhIS",departureDate:"FlightCard_departureDate__1DndA",dash:"FlightCard_dash__3Gu98",carrier:"FlightCard_carrier__xaIIf",price:"FlightCard_price__Ceep5",cost:"FlightCard_cost__ByuGp",value:"FlightCard_value__18vz0",like:"FlightCard_like__3dZWo"}},26:function(e,t,a){e.exports={Page:"Main_Page__1DHqG",wrapper:"Main_wrapper__35P3j",header:"Main_header__3y46Q",arrow:"Main_arrow__3zJ04",date:"Main_date__1xJZs",slider_wrapper:"Main_slider_wrapper__2jVid",flights__counter:"Main_flights__counter__2NJTY",counter_value:"Main_counter_value__2TIqX",flights__list:"Main_flights__list__Z-90I"}},260:function(e,t,a){},37:function(e,t,a){e.exports={Login:"Login_Login__3DFhr",form_wrapper:"Login_form_wrapper__1nApP",form_title:"Login_form_title__32UWV",form:"Login_form__iWHbJ",inputs_wrapper:"Login_inputs_wrapper__M9sr1",button_wrapper:"Login_button_wrapper__3ljX9"}},400:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(36),c=a.n(i),s=a(22),o=a(15),l=a(170),d=a(17),u="GET_FLIGHTS",j="SET_FLIGHTS",p="TOGGLE_LIKE",_={flights:null,favoriteFlights:[],sliderImages:["http://topsweet.ru/wp-content/uploads/2019/12/new-york2-696x464.jpg","https://i.pinimg.com/originals/68/d0/af/68d0afa8eab80d928329273b8b7831e0.jpg","http://www.pozitiff.info/uploads/posts/2018-01/1515178692_1515100070_08.jpg","https://avatars.mds.yandex.net/get-pdb/33827/a552c06c-517b-4791-9bcc-c2bfba569184/s1200?webp=false"]};var h="LOGIN",g="LOGOUT",b={token:null};var m=a(404),f=a(172),O=a(53),x=a.n(O),v=a(73),w=a(163),N=a.n(w),k=x.a.mark(F),y=x.a.mark(I),C=function(e){var t={method:"GET",url:"https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/browsequotes/v1.0/RU/RUB/ru/SVO-sky/JFK-sky/".concat(e),headers:{"x-rapidapi-key":"b8b6b6f8e7mshd691456de9a22d7p1228e3jsne2aebab42dc3","x-rapidapi-host":"skyscanner-skyscanner-flight-search-v1.p.rapidapi.com"}};return N.a.request(t).then((function(e){return e.data})).catch((function(e){return console.log(e)}))};function F(e){var t,a;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.date,n.prev=1,n.next=4,Object(v.a)(C,t);case 4:return a=n.sent,n.next=7,Object(v.b)({type:j,data:a});case 7:n.next=11;break;case 9:n.prev=9,n.t0=n.catch(1);case 11:case"end":return n.stop()}}),k,null,[[1,9]])}function I(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.c)(u,F);case 2:case"end":return e.stop()}}),y)}var L=Object(f.a)(),S=Object(o.c)({flights:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(d.a)(Object(d.a)({},e),{},{flights:t.data});case p:console.log(t.id);var a=Object(l.a)(e.favoriteFlights),n=a.indexOf(t.id);return-1===n?a.push(t.id):a.splice(n,1),console.log(a),Object(d.a)(Object(d.a)({},e),{},{favoriteFlights:a});default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return localStorage.setItem("token","fake_token"),Object(d.a)(Object(d.a)({},e),{},{token:"fake_token"});case g:return localStorage.removeItem("token"),Object(d.a)(Object(d.a)({},e),{},{token:null});default:return e}},form:m.a}),D=Object(o.e)(S,Object(o.a)(L));L.run(I);var T,G=a(68),P=(a(260),a(261),a(262),a(263),a(13)),H=a(403),M=a(402),J=a(69),U=a(165),E=a.n(U),K=a(2),R=function(e){var t=e.input,a=(e.meta,Object(J.a)(e,["input","meta"]));return Object(K.jsx)("button",Object(d.a)(Object(d.a)(Object(d.a)({className:E.a.Button},t),a),{},{children:a.children}))},B=a(42),W=a.n(B),q=function(e){var t=e.input,a=e.meta,n=Object(J.a)(e,["input","meta"]),r=a.error&&a.touched,i=[W.a.input];return r&&i.push(W.a.invalid),Object(K.jsxs)("div",{className:W.a.TextInput,children:[Object(K.jsx)("label",{className:W.a.label,children:n.label}),Object(K.jsx)("input",Object(d.a)(Object(d.a)({className:i.join(" ")},t),n)),r&&Object(K.jsx)("span",{className:W.a.error,children:a.error})]})},A=a(166),Q=a.n(A),Z=function(e){if(!e)return"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"},z=function(e){if(!Q.a.email(e))return"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443"},V=function(e){if(/[^a-zA-Z0-9/s]/i.test(e))return"\u0411\u0435\u0437 \u043a\u0438\u0440\u0438\u043b\u043b\u0438\u0446\u044b \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432"},X=a(37),Y=a.n(X),$=(T=8,function(e){if(!(e.length>=T))return"\u041c\u0438\u043d\u0438\u043c\u0443\u043c ".concat(T," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}),ee=Object(M.a)({form:"login"})((function(e){return Object(K.jsxs)("form",{onSubmit:e.handleSubmit,className:Y.a.form,children:[Object(K.jsxs)("div",{className:Y.a.inputs_wrapper,children:[Object(K.jsx)(H.a,{label:"\u041b\u043e\u0433\u0438\u043d:",validate:[Z,z],component:q,type:"text",name:"login"}),Object(K.jsx)(H.a,{label:"\u041f\u0430\u0440\u043e\u043b\u044c:",validate:[Z,$,V],component:q,type:"password",name:"password"})]}),Object(K.jsx)("div",{className:Y.a.button_wrapper,children:Object(K.jsx)(R,{children:"\u0412\u043e\u0439\u0442\u0438"})})]})})),te=function(){var e=Object(s.c)();return Object(K.jsx)("div",{className:Y.a.Login,children:Object(K.jsxs)("div",{className:Y.a.form_wrapper,children:[Object(K.jsx)("h1",{className:Y.a.form_title,children:"Simple Flight Check"}),Object(K.jsx)(ee,{onSubmit:function(t){e({type:"LOGIN"})}})]})})},ae=function(){return Object(s.c)()({type:"LOGOUT"}),Object(K.jsx)(P.a,{to:"/login"})},ne=a(171),re=a(167),ie=a.n(re),ce=a(71),se=a.n(ce),oe=function(e){return Object(K.jsx)(ie.a,Object(d.a)(Object(d.a)({},{dots:!1,infinite:!0,speed:500,slidesToShow:1,variableWidth:!0,slidesToScroll:1,autoplay:!0}),{},{className:se.a.slider_wrapper,children:e.images.map((function(e,t){return Object(K.jsx)("div",{className:se.a.slide,children:Object(K.jsx)("div",{className:se.a.picture,style:{backgroundImage:'url("'.concat(e,'")')}})},t)}))}))},le=a(19),de=a.n(le);function ue(e){var t=e.getHours().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1}),a=e.getMinutes().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1});return"".concat(t,":").concat(a)}var je=function(e){return Object(K.jsxs)("div",{className:de.a.FlightCard,children:[Object(K.jsx)("div",{className:de.a.plane,children:Object(K.jsx)("div",{className:de.a.plane_wrapper,children:Object(K.jsx)("img",{src:"/plane.svg",alt:"plane"})})}),Object(K.jsxs)("div",{className:de.a.info,children:[Object(K.jsxs)("div",{className:de.a.destination,children:[Object(K.jsx)("div",{className:de.a.from,children:"".concat(e.fromCityName," (").concat(e.fromCityCode,")")}),Object(K.jsx)("img",{className:de.a.destination_arrow,src:"arrow-right.svg",alt:"arrow"}),Object(K.jsx)("div",{className:de.a.to,children:"".concat(e.toCityName," (").concat(e.toCityCode,")")})]}),Object(K.jsxs)("div",{className:de.a.departureDate,children:[Object(K.jsx)("div",{className:de.a.date,children:(t=new Date(e.departureDate),t.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric"}))}),Object(K.jsx)("img",{className:de.a.dash,src:"dash.svg",alt:"dash"}),Object(K.jsx)("div",{className:de.a.time,children:ue(new Date(e.departureDate))})]}),Object(K.jsx)("div",{className:de.a.carrier,children:e.carrier})]}),Object(K.jsxs)("div",{className:de.a.price,children:[Object(K.jsx)("div",{children:Object(K.jsx)("img",{className:de.a.like,src:e.isLiked?"/like.svg":"/unlike.svg",alt:"like",onClick:function(){return e.onLike("".concat(e.departureDate,"_").concat(e.id))},width:21,height:18})}),Object(K.jsxs)("div",{className:de.a.cost,children:["Price:\xa0",Object(K.jsx)("span",{className:de.a.value,children:"".concat(e.price.toLocaleString("ru-RU")," \u20bd")})]})]})]});var t},pe=a(105),_e=a.n(pe),he=function(){return Object(K.jsx)("header",{className:_e.a.Header,children:Object(K.jsxs)(G.b,{className:_e.a.logout,to:"/logout",children:[Object(K.jsx)("span",{children:"\u0412\u044b\u0439\u0442\u0438"}),Object(K.jsx)("img",{src:"/logout.svg",alt:"logout"})]})})},ge=a(168),be=a.n(ge),me=a(72),fe=a.n(me),Oe=function(e){var t=Object(n.forwardRef)((function(e,t){var a,n=e.value,r=e.onClick;return Object(K.jsxs)("button",{className:fe.a.DatePicker,onClick:r,ref:t,children:[Object(K.jsx)("div",{className:fe.a.value,children:(a=new Date(n),a.toLocaleString("ru",{year:"numeric",month:"long",day:"numeric"}).replace(" \u0433.",""))}),Object(K.jsx)("img",{className:fe.a.img,src:"/calendar.svg",alt:"calendar"})]})}));return Object(K.jsx)(be.a,{selected:e.value,onChange:function(t){return e.onChange(t)},customInput:Object(K.jsx)(t,{}),minDate:new Date})},xe=a(26),ve=a.n(xe);var we=Object(s.b)((function(e){return{flights:e.flights.flights,favoriteFlights:e.flights.favoriteFlights,images:e.flights.sliderImages}}),(function(e){return{getFlights:function(t){return e(function(e){return{type:u,date:e}}(t))},toggleFlightLike:function(t){return e(function(e){return{type:p,id:e}}(t))}}}))((function(e){var t=r.a.useState(new Date),a=Object(ne.a)(t,2),n=a[0],i=a[1];r.a.useEffect((function(){n?e.getFlights(n.toISOString().split("T")[0]):i(new Date)}),[n]);var c=function(t){e.toggleFlightLike(t)};return Object(K.jsxs)("section",{className:ve.a.Page,children:[Object(K.jsx)(he,{}),Object(K.jsxs)("div",{className:ve.a.wrapper,children:[Object(K.jsxs)("div",{className:ve.a.header,children:[Object(K.jsx)("div",{className:ve.a.title,children:"\u0412\u044b\u043b\u0435\u0442\u044b"}),Object(K.jsx)("img",{className:ve.a.arrow,src:"/arrow.svg",alt:">",width:9,height:17}),Object(K.jsx)("div",{className:ve.a.destination,children:"SVO - JFK"}),Object(K.jsx)("div",{className:ve.a.date,children:Object(K.jsx)(Oe,{value:n,onChange:i})})]}),Object(K.jsx)("div",{className:ve.a.slider_wrapper,children:Object(K.jsx)(oe,{images:e.images})}),Object(K.jsxs)("div",{className:ve.a.flights,children:[Object(K.jsxs)("div",{className:ve.a.flights__counter,children:["\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435:\xa0\xa0",Object(K.jsx)("span",{className:ve.a.counter_value,children:e.favoriteFlights.length}),"\xa0\u0440\u0435\u0439\u0441\u043e\u0432"]}),Object(K.jsx)("div",{className:ve.a.flights__list,children:e.flights?e.flights.Quotes.map((function(t){return Object(K.jsx)(je,{id:t.QuoteId,price:t.MinPrice,departureDate:t.OutboundLeg.DepartureDate,fromCityName:"Moscow",fromCityCode:"SVO",toCityName:"New York City",toCityCode:"JFK",carrier:e.flights.Carriers[0].Name,isLiked:-1!==e.favoriteFlights.indexOf("".concat(t.OutboundLeg.DepartureDate,"_").concat(t.QuoteId)),onLike:c},t.QuoteId)})):null})]})]})]})}));var Ne=Object(s.b)((function(e){return{isAuthenticated:!!e.login.token}}),(function(e){return{autoLogin:function(){return e(localStorage.getItem("token")?{type:h}:{type:g})}}}))((function(e){return r.a.useEffect((function(){e.autoLogin()}),[]),console.log(e.isAuthenticated),Object(K.jsx)("div",{children:e.isAuthenticated?Object(K.jsxs)(P.d,{children:[Object(K.jsx)(P.b,{path:"/",component:we,exact:!0}),Object(K.jsx)(P.b,{path:"/logout",component:ae}),Object(K.jsx)(P.a,{to:"/"})]}):Object(K.jsxs)(P.d,{children:[Object(K.jsx)(P.b,{path:"/login",component:te}),Object(K.jsx)(P.a,{to:"/login"})]})})}));c.a.render(Object(K.jsx)(G.a,{children:Object(K.jsx)(s.a,{store:D,children:Object(K.jsx)(Ne,{})})}),document.getElementById("root"))},42:function(e,t,a){e.exports={TextInput:"TextInput_TextInput__1TK5W",label:"TextInput_label__2Ncbx",input:"TextInput_input__RNXma",invalid:"TextInput_invalid__1KajR",error:"TextInput_error__32SW7"}},71:function(e,t,a){e.exports={slider_wrapper:"Slider_slider_wrapper__1Q41y",slide:"Slider_slide__-UNb6",picture:"Slider_picture__3wKZb"}},72:function(e,t,a){e.exports={DatePicker:"DatePicker_DatePicker__2wqFH",value:"DatePicker_value__1igNR",img:"DatePicker_img__3pt4H",input:"DatePicker_input__hgh6Y"}}},[[400,1,2]]]);
//# sourceMappingURL=main.6c0c7c96.chunk.js.map